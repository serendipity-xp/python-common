# Flask
- 请求-响应循环
    - 程序和请求上下文：
        - from flask import request
        - flask使用上下文临时把某些对象变为全局可访问
        - flask使用上下文让特定的变量在一个线程中全局可访问，与此同时却不会干扰其它线程
        - |上下文全局变量|上下文|说明|
          |-----------|-----|----|
          |current_app|程序上下文|当前激活程序的程序实例|
          |g|程序上下文|处理请求时用作临时存储的对象。每次请求都会重设这个变量|
          |request|请求上下文|请求对象,封装了客户端发出的 HTTP 请求中的内容|
          |session|请求上下文|用户会话,用于存储请求之间需要“记住”的值的词典|
        - Flask 在分发请求之前激活(或推送)程序和请求上下文,请求处理完成后再将其删除。
        - 在程序实例上调用 app.app_context() 可获得一个程序上下文
    - 请求调度
        - Flask 使用 app.route 修饰器或者非修饰器形式的 app.add_url_rule() 生成映射。
        - app.url_map
    - 请求钩子
        - Flask 提供了注册通用函数的功能,注册的函数可在请求被分发到视图函数之前或之后调用
        - 请求钩子使用装饰器实现，支持4种钩子：
            - before_first_request :注册一个函数,在处理第一个请求之前运行。
            - before_request :注册一个函数,在每次请求之前运行。
            - after_request :注册一个函数,如果没有未处理的异常抛出,在每次请求之后运行。
            - teardown_request :注册一个函数,即使有未处理的异常抛出,也在每次请求之后运行。
        - 在请求钩子函数和视图函数之间共享数据一般使用上下文全局变量 g
    - 响应
        - Flask 调用视图函数后,会将其返回值作为响应的内容。
        - HTTP 响应中一个很重要的部分是状态码,Flask 默认设为 200,这个代码表明请求已经被成功处理
        - 第二个参数代表响应状态码
          ```python
          return '<h1>Bad Request</h1>', 400
          ```
        - 视图函数返回的响应还可接受第三个参数,这是一个由首部(header)组成的字典,可以添加到 HTTP 响应中
        - Flask 视图函数还可以返回 Response 对象
        - 重定向经常使用 302 状态码表示,指向的地址由 Location 首部提供
        - 还有一种特殊的响应由 abort 函数生成,用于处理错误。
        - abort 不会把控制权交还给调用它的函数,而是抛出异常把控制权交给 Web 服务器。
- Flask 扩展
    - from flask.ext.script import Manager
   
        